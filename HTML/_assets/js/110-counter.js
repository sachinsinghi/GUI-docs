/***************************************************************************************************************************************************************
 *
 * counter additions
 *
 **************************************************************************************************************************************************************/


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
//--------------------------------------------------------------------------------------------------------------------------------------------------------------


(function(App) {

	var module = {};

	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Module get method
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	module.get = function() {
		App.debugging( 'counter: Getting counter value', 'report' );

		$.ajax({
			url: App.LOG,
			cache: false
		}).done(function( html ) {

			if( !isNaN(html) ) {
				$('.js-counter').parent().removeClass('is-hidden');
				$('.js-counter').text( html );

				setTimeout(function() {
						App.counter.get();
					}, 4000
				);
			}

		});
	};


	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Module init method
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	module.init = function() {
		App.debugging( 'counter: Initiating', 'report' );

		if( $('.js-counter').length ) {
			App.debugging( 'counter: Found instance', 'report' );

			App.counter.get();
		}
	};


	App.counter = module;


}(App));


// start the module
App.counter.init();